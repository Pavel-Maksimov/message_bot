# Message Bot
Message Bot - это Telegram бот, который может сохранять сообщения пользователей, хранить их в базе и выдавать уже сохраненные сообщения по запросу пользователя.
<br>
Полученные отзывы сохраняются в базу данных, а также отправляются в Телеграмм зарегестрированным пользователям.<br>
Команды бота:
<p>
/start  - сохраняет telegram id пользователя в базу и присваивает пользователю id.<br>
/write - записывает сообщение после команды в таблицу messages, присваивает ему id, запоминает, что данное сообщение является последним для данного пользователя, выводит после исполнения команды текст "заметка <id> сохранена".<br>
/read_last - выводит последнее сообщение данного пользователя.<br>
/read <id> - выводит поле сообщение с указанным id. Если такового нет, то выводит текст "заметка <id> не найдена", либо "заметка <id> принадлежит другому пользователю", если была попытка прочитать заметку другого пользователя.<br>
/read_all - выводит все заметки текущего пользователя бота по порядку от самого старого до самого нового.<br>
/read_tag <tag> - выводит все заметки пользователя по указанному тэгу в сообщении (в одном сообщении тэгов может быть несколько, например "Компания #Уфанет предупреждает, что вещатель проводит работы на следующих каналах: #Россия1 и #СТС").<br>
/write_tag <tag> <описание тэга> - создает тэг. Если тэг уже существует, то меняет его описание<br>
/tag <tag_1>,<tag_2>...<tag_n> - выводит описание введенных тэгов.<br>
/tag_all - выводит описание всех тэгов.<br>
</p>

### Развёртывание проекта <br>
Для развёртывания проекта выполните следующие действия:<br>
Клонируйте репозиторий:
```
git clone https://github.com/Pavel-Maksimov/recipies
```
В директории message_bot создайте файл .env со следующим содержимим:
```
DB_USER=<имя пользователя>
DB_PASSWORD=<пароль>
DB_HOST=127.0.0.1
DB_NAME=<имя базы данных>
BOT_ID=<телеграм-токен бота>
```

Перейдите в папку с проектом и создайте и активируйте виртуальное окружение. <br>
Для Windows:
```
virtualenv -p <путь до файла интерпретатора> venv
source venv/Scripts/activate
```
Для Linux:
```
virtualenv -p <путь до файла интерпретатора> venv
source venv/bin/activate 
```
Установите все необходимые зависимости:
```
(venv)$pip install -r requirements.txt
```
Для создания базы данных и необходимых таблиц выполните команду:
```
(venv)$python create_tables.py
```
Для запуска бота выполните команду:
```
(venv)$python start.py
```
Для остановки бота используйте сочетание клавиш **Ctrl+C**.<br>